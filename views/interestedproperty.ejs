  <div id="page_wrapper" class="bg-light-gray">
        <!--============== Property Details Start ==============-->
        <div class="full-row pt-0 pt-lg-5">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="single-property-page property-block">
                            <div class="entry-single-wrapper">
                                <div class="entry-single-header">
                                    <div class="page-title-wrapper d-flex flex-column">
                                        <nav aria-label="breadcrumb">
                                            <ol class="breadcrumb mb-0 bg-transparent p-0">
                                                <li class="breadcrumb-item"><a href="/">Home</a></li>
                                                <li class="breadcrumb-item"><a href="/browse">Browse</a></li>
                                                <li class="breadcrumb-item active" aria-current="page">Property Info</li>
                                            </ol>
                                        </nav>
                                        <h1 class="entry-single-title"><%=property.propertyName%></h1>
                                        <span class="listing-location"><i class="fas fa-map-marker-alt me-2"></i><%=property.location%></span>
                                        <div class="type"><span class="rent text-white">For <%=property.propertyStatus%></span></div>
                                    </div>
                                    <div class="entry-property-price-wrapper mt-5">
                                        <span class="listing-price">₹<%=property.priceFromInNumber%><small> / Fixed</small></span>
                                        <a href="#" class="btn btn-primary btn-hover-secondary hover-flash-move" data-bs-toggle="modal" data-bs-target="#interestedModal">
                                        Interested
                                       </a>
                                    </div>
                                </div>
                                <div class="entry-single-thumbnail mb-4">
                                <div id="single-property" class="w-100 position-relative">
                                    <img src="<%=property.mainImage || '/assets/images/landing_bg.png'%>"
                                         class="img-fluid rounded w-100"
                                         alt="Property image"
                                         style="object-fit: cover; max-height: 500px;">
                                </div>
                               </div>
                                <div class="entry-single-content-wrapper">
                                    <div class="row g-4">
                                        <div class="col-lg-8">
                                            <div class="single-content-wrapper">
                                                <div class="single-property-overview">
                                                    <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark pb-2 mb-4">Overview</h4>
                                                    <ul class="property-info">
                                                        <li><span>BHK:</span><%=property.additionalInfo%></li>
                                                        <li><span>Area From:</span><%=property.areaSquareFeetFrom%><sup>2</sup></li>
                                                        <li><span>Area To:</span><%=property.areaSquareFeetTo%><sup>2</sup></li>
                                                        <li><span>Year Of Construction:</span><%=property.yearsOfConstruction%></li>
                                                        <li><span>Price In Words (From):</span><%=property.priceFromInWords%></li>
                                                        <li><span>Price In Words (To):</span><%=property.priceToInWords%></li>
                                                        <li><span>Type :</span><%=property.propertyType%> </li>
                                                        <li><span>Installment Facility :</span> Yes</li>
                                                        <li><span>Insurance :</span> Yes</li>
                                                    </ul>
                                                </div>
                                                <div class="single-property-description">
                                                    <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark pb-2 mb-4">Description</h4>
                                                    <p><%-property.description%></p></p>
                                                </div>
                                                <div class="single-property-details">
                                                    <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark pb-2 mb-4">Address</h4>
                                                    <ul class="property-address">
                                                        <li><span>Address :</span><%=property.address%></li>
                                                    </ul>
                                                </div>
                                                <div class="single-property-details">
                                               <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark pb-2 mb-4">
                                                   Images
                                               </h4>
                                               <ul class="property-address">
                                                   <% if (property.upload && property.upload.length > 0) { %>
                                                       <% property.upload.forEach(function(image) { %>
                                                           <li>
                                                               <img src="<%= image %>" alt="Property Image" class="img-fluid mb-3">
                                                           </li>
                                                       <% }); %>
                                                   <% } else { %>
                                                       <li>No images available</li>
                                                   <% } %>
                                               </ul>
                                            </div>
                                                <div class="single-property-details">
                                                    <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark pb-2 mb-4">Property Features</h4>
                                                    <ul class="property-feature list-style">
                                                        <li>Parking Facility</li>
                                                        <li>Green Park View</li>
                                                        <li>Playground Include</li>
                                                        <li>Garden</li>
                                                        <li>Kitchen Furniture</li>
                                                        <li>Fire Security</li>
                                                    </ul>
                                                </div>
                                                <div class="single-property-details">
                                                    <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark pb-2 mb-4">Video Prasentation</h4>
                                                    <div class="mt-md-30 mb-30 position-relative">
                                                        <img src="/assets/images/landing_bg.png" alt="real estate template">
                                                        <div class="simple-video-play d-flex position-absolute top-50 start-50 translate-middle">
                                                            <div class="position-relative d-inline-block">
                                                                <a data-fancybox="" href="<%=property.videoUrl%>" class="rounded-circle position-relative bg-primary" style="z-index: 10">
                                                                    <i class="fa-solid fa-play color-white position-relative top-50 start-50 translate-middle"></i>
                                                                </a>
                                                                <div class="loader position-absolute top-50 start-50 translate-middle">
                                                                    <div class="loader-inner ball-scale-multiple">
                                                                        <div class="bg-primary"></div>
                                                                        <div class="bg-primary"></div>
                                                                    </div><span class="tooltip">
                                                                  <b>ball-scale-multiple</b></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="single-property-sidebar">
                                                <div class="contact-with-agent">
                                                    <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark pb-2 mb-4">Listing Agent</h4>
                                                    <div class="single-agent-info">
                                                        <div class="agent-block">
                                                            <h5 class="agent-name fs-6 color-dark ls-1 mb-1">Admin</h5>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="contact-with-agent">
                                                <h4 class="text-uppercase ls-3 fw-semibold border-bottom fs-6 color-dark mt-2">Banks</h4>

                                                <div class="row">
                                                  <% if (mybanks && mybanks.length > 0) { %>
                                                    <% mybanks.forEach(function(bank) { %>
                                                      <div class="col-md-4 col-sm-6 mb-3">
                                                        <div class="single-agent-info d-flex align-items-center p-2 rounded">
                                                          <% if (bank.upload) { %>
                                                            <img src="<%= bank.upload %>" alt="<%= bank.name %>" style="width:50px; height:50px;">
                                                          <% } else { %>
                                                            <img src="/images/default-bank.png" alt="Default Logo" style="width:50px; height:50px;">
                                                          <% } %>
                                                          <div class="agent-block">
                                                            <h5 class="agent-name fs-6 color-dark ls-1 mb-0"><%= bank.name %></h5>
                                                            <h5 class="agent-name fs-6 color-dark ls-1 mb-0"><%= bank.roi %>%</h5>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    <% }) %>
                                                  <% } else { %>
                                                    <p class="text-muted">No banks available.</p>
                                                  <% } %>
                                                </div>
                                              </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--=============== Property Details End ===============-->
        <!--============== Copyright Section Start ==============-->
        <div class="copyright font-primary py-3">
            <div class="container">
                <div class="row row-cols-md-2 row-cols-1">
                    <div class="col">
                        <p class="color-white mb-0">©2023 Uniland All right reserved</p>
                    </div>
                    <div class="col">
                        <ul class="bottom-footer-nav list-color-gray">
                            <li><a href="/faq">Privacy & Policy </a></li>
                            <li>|</li>
                            <li><a href="/faq">Site Map</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!--============== Copyright Section End ==============-->
    </div>

    <!-- Scroll to top -->
    <div class="scroll-top-vertical xs-mx-none" id="scroll">Back to top <i class="ms-2 fa-solid fa-arrow-right-long"></i></div>

    <div class="modal fade" id="interestedModal" tabindex="-1" aria-labelledby="interestedLabel">
  <div class="modal-dialog">
    <div class="modal-content rounded-3 shadow">
      <div class="modal-header">
        <h5 class="modal-title" id="interestedLabel">Interested</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="interestedForm">
          <div class="mb-3">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-control" name="name" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Email address</label>
            <input type="email" class="form-control" name="email" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Contact Number</label>
            <input type="tel" class="form-control" name="contact" pattern="[0-9]{10}" maxlength="10" inputmode="numeric" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Address</label>
            <input type="text" class="form-control" name="address" required>
          </div>
          <input type="hidden" name="location" value="<%=property.location%>">
          <input type="hidden" name="type" value="Interested">
          <input type="hidden" name="propId" value="<%= property._id %>">
          <button type="submit" class="btn btn-primary w-100">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
document.getElementById("interestedForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const formData = {
    name: this.name.value,
    email: this.email.value,
    contact: this.contact.value,
    address:this.address.value,
    type:this.type.value,
    location:this.location.value,
    propId:this.propId.value
  };

  try {
    const res = await fetch("/interested", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData)
    });

    const data = await res.json();
    if (data.success) {
      alert("Your request has been saved! ✅");
      this.reset();
      var myModalEl = document.getElementById("interestedModal");
      var modal = bootstrap.Modal.getInstance(myModalEl);
      if (!modal) modal = new bootstrap.Modal(myModalEl);
      document.activeElement.blur();
      modal.hide();
      document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
    } else {
      alert("Something went wrong ❌");
    }
  } catch (err) {
    console.error(err);
    alert("Server error!");
  }
});
</script>
